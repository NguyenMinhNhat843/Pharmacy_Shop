<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/list_product.css}">
    <link rel="stylesheet" th:href="@{/static/css/index.css}">
</head>
<body>
<!-- Header section -->
<div class="container-fluid bg-body-tertiary">
    <nav class="container d-flex py-2 align-items-center">
        <a href="index.html" class="logo_wrap d-flex justify-content-center align-items-center">
            <img alt="logo" src='../images/logo.jpg' class="logo_landing"/>
        </a>
        <form class="d-flex flex-grow-1" action="/home/type/search" method="get">
            <input type="hidden" name="type" th:value="${selectedType}" />
            <input type="text" class="form-control me-2" placeholder="Search..." name="keyword"/>

            <input class="btn btn-outline-success" type="submit" value="Search"/>
        </form>
        <div class="d-flex w-[20]">
            <a class="nav-link ps-3" href="./Login.html">Đăng nhập</a>
            <div class="d-flex justify-content-center align-items-center ps-3">
                <i class="fa-solid fa-cart-shopping pe-1"></i>
                <a class="nav-link" href="./Cart.html">Giỏ hàng</a>
            </div>
        </div>
    </nav>
</div>

    <!-- Danh muc section -->

<div class="w-100 py-3 bg-success text-white">
    <div class="container d-flex">
        <!-- Cập nhật lại liên kết theo đúng đường dẫn controller -->
        <a href="/home/type?type=TP001" class="nav-link pe-3">Thực phẩm chức năng</a>
        <a href="/home/type?type=TP002" class="nav-link pe-3">Thuốc không kê đơn</a>
        <a href="/home/type?type=TP003" class="nav-link pe-3">Dụng cụ y tế</a>
        <a href="/home/type?type=TP004" class="nav-link pe-3">Sản phẩm chăm sóc sức khỏe</a>
        <a href="/home/type?type=TP005" class="nav-link pe-3">Tiểu đường</a>
        <a href="/home/type?type=TP006" class="nav-link pe-3">Tim mạch</a>
        <a href="/home/type?type=TP007" class="nav-link pe-3">Xương khớp</a>
        <a href="/home/type?type=TP008" class="nav-link pe-3">Thuốc kê đơn</a>
        <a href="/home/type?type=TP009" clas    s="nav-link pe-3">Thuốc cho bé</a>
        <a href="/home/type?type=TP010" class="nav-link pe-3">Mẹ và Bé</a>
    </div>
</div>

    <!-- Body        -->
    <div class="container">
        <div class="breadcrumb">
            <a href="#">Trang chủ</a> &gt; <span>Thực phẩm chức năng</span>
        </div>
        <h2>Thực phẩm chức năng</h2>
        <div class="categories">
            <a href="#" class="grid_link"> <img
                    src="../images/List_Product/ForChildren.png"
                    alt="Thực phẩm chức năng 1">
                <p>Dành cho trẻ em</p>
            </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/BeautiCare.jpg"
                alt="Thực phẩm chức năng 2">
            <p>Chăm sóc sắc đẹp</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/HeartCare.jpg"
                alt="Thực phẩm chức năng 3">
            <p>Chăm sóc tim mạch</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/RespiratoryGroup.jpg"
                alt="Thực phẩm chức năng 4">
            <p>Nhóm hô hấp</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/TaiMuiHong.jpg"
                alt="Thực phẩm chức năng 5">
            <p>Nhóm Tai/Mũi/Họng</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/vitami.jpg" alt="Thực phẩm chức năng 6">
            <p>Vitamin và Khoáng Chất</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/SupportsSexPhysiology.jpg"
                alt="Thực phẩm chức năng 7">
            <p>Hỗ trợ sinh lý nam nữ</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/LiverCare.jpg"
                alt="Thực phẩm chức năng 8">
            <p>Chăm sóc gan</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/NeurologicalCare.jpg"
                alt="Thực phẩm chức năng 9">
            <p>Nhóm thần kinh</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/loseweight.jpg"
                alt="Thực phẩm chức năng 10">
            <p>Giảm cân</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/BloodSugar.jpg"
                alt="Thực phẩm chức năng 11">
            <p>Nhóm đường huyết</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/BoneJointCare.jpg"
                alt="Thực phẩm chức năng 12">
            <p>Nhóm cơ xương khớp</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/StomachCare.jpg"
                alt="Thực phẩm chức năng 13">
            <p>Nhóm dạ dày</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/KidneyCare.jpg"
                alt="Thực phẩm chức năng 14">
            <p>Nhóm thận tiết niệu</p>
        </a> <a href="#" class="grid_link"> <img
                src="../images/List_Product/WomenCare.jpg"
                alt="Thực phẩm chức năng 15">
            <p>Dành cho phụ nữ mang thai</p>
        </a>
        </div>
        <div class="main_section">
            <div>
                <aside>
                    <aside class="filter-sidebar">
                        <div class="header-sort">
                            <h2 style="padding-top: 15px">Bộ lọc</h2>
                            <a href="#" class="clear-filter" onclick="resetForm(event)">Thiết lập lại</a>
                        </div>
                        <form method="get" action="/home/type/filter" id="filterForm">
                            <input type="hidden" name="type" th:value="${selectedType}" />

                            <!-- Khoảng giá -->
                            <div class="filter-section">
                                <div class="rentPrice">
                                    <label>Khoảng giá</label>
                                </div>
                                <input type="number" name="giaMin" placeholder="Tối thiểu" class="price-input" min="0"  th:value="${giaMin != null ? giaMin : ''}">
                                <input type="number" name="giaMax" placeholder="Tối đa" class="price-input" min="0"     th:value="${giaMax != null ? giaMax : ''}">

                                <button type="submit" class="apply-btn">Áp dụng</button>
                            </div>

                            <!-- Các checkbox lựa chọn theo khoảng giá -->
                            <div class="filter-section">
                                <div class="checkbox-group">
                                    <label><input type="checkbox" name="priceRange" value="under100000"  th:checked="${priceRange != null && priceRange.contains('under100000')}"> Dưới 100.000 đ</label>
                                    <label><input type="checkbox" name="priceRange" value="100000-300000" th:checked="${priceRange != null && priceRange.contains('100000-300000')}"> 100.000 đ - 300.000 đ</label>
                                    <label><input type="checkbox" name="priceRange" value="300000-500000" th:checked="${priceRange != null && priceRange.contains('300000-500000')}"> 300.000 đ - 500.000 đ</label>
                                    <label><input type="checkbox" name="priceRange" value="over500000" th:checked="${priceRange != null && priceRange.contains('over500000')}" > Trên 500.000 đ</label>
                                </div>
                            </div>
                        </form>
                    </aside>
                </aside>
            </div>
            <div class="product_list_main">
                <main class="product-grid">
                    <div class="sort-options">
                        <label class="labelSort">Sắp xếp theo:</label>
                        <button class="sort-btn">Giá giảm dần</button>
                        <button class="sort-btn">Giá tăng dần</button>
                    </div>
                    <div class="products">
                        <!-- Lặp qua các sản phẩm -->
                        <div th:each="product : ${products}">
                            <a href="#" class="product-card">
                                <img th:src="@{${product.image}}" alt="Product Image">
                                <h3 class="product-title" th:text="${product.tenSanPham}"></h3>
                                <p class="price" th:text="${product.giaBan} + ' đ/Hộp'"></p>
                                <div class="span-text">
                                    <span class="heart-icon"><i class="fas fa-heart"></i></span>
                                    <span th:text="${product.soLuongConLai}">0</span> |
                                    <span th:text="${product.soLuongDaBan}">0</span> Đã bán
                                </div>
                                <button class="buy-btn">Chọn sản phẩm</button>
                            </a>
                        </div>
                    </div>
                    <div class="load-more">
                        <button class="view-more-btn">Xem thêm</button>
                    </div>
                </main>
            </div>
        </div>
    </div>
<!--    Footer    -->
<div class="bg-success p-5 d-flex justify-content-center">
    <div class="row gap-2 container text-white">
        <div class="col">
            <img src="../image/10.png" alt="logo" class="pb-2"/>
            <p>123 Gò Vấp, đường Nguyễn Minh Nhật</p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">0123456789</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">abc@gmail.com</a></p>
        </div>
        <div class="col">
            <p class="fw-bold">Liên kết nhanh</p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">Home</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">About</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">Services</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">Carees</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">Contact</a></p>
        </div>
        <div class="col">
            <p class="fw-bold">Services</p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">Medical</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">Operation</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">Laboratary</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">ICU</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">Patient Ward</a></p>
        </div>
        <div class="col">
            <p class="fw-bold">Social Link</p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">FaceBook</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">Instagram</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">Twitter</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">youtube</a></p>
            <p><a href="#" class="text-white link-underline link-underline-opacity-0">Pinterest</a></p>
        </div>
    </div>
</div>
<script>
    // Hàm reset toàn bộ form
    function resetForm(event) {
        event.preventDefault(); // Ngăn chặn điều hướng liên kết
        const form = document.getElementById('filterForm'); // Lấy form
        form.reset(); // Đặt lại tất cả giá trị mặc định của form

        // Đảm bảo xóa giá trị ở các input tùy chỉnh (nếu có)
        document.querySelector('input[name="giaMin"]').value = '';
        document.querySelector('input[name="giaMax"]').value = '';

        // Bỏ chọn tất cả các checkbox
        const checkboxes = document.querySelectorAll('input[type="checkbox"]');
        checkboxes.forEach(checkbox => checkbox.checked = false);
    }

    // Hàm xử lý khi người dùng tìm kiếm
    function submitSearchForm(event) {
        event.preventDefault(); // Ngừng hành động mặc định của form (không reload trang)
        var keyword = document.querySelector('input[name="keyword"]').value;
        var type = document.getElementById('type').value;
        var url = `/home/type?type=${type}&keyword=${keyword}`;
        window.location.href = url; // Thay đổi đường dẫn trang
    }

    // Hàm xử lý khi người dùng áp dụng bộ lọc
    function submitFilterForm(event) {
        event.preventDefault(); // Ngừng hành động mặc định của form (không reload trang)

        var giaMin = document.getElementById('giaMin').value;
        var giaMax = document.getElementById('giaMax').value;
        var priceRange = [];

        // Lấy tất cả các checkbox đã chọn
        document.querySelectorAll('input[name="priceRange"]:checked').forEach(function(checkbox) {
            priceRange.push(checkbox.value);
        });

        var type = document.getElementById('type').value;

        var url = `/home/type/filter?type=${type}&giaMin=${giaMin}&giaMax=${giaMax}&priceRange=${priceRange.join(',')}`;
        window.location.href = url; // Thay đổi đường dẫn trang
    }
</script>
</body>
</html>