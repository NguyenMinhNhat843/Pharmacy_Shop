<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi·ªè h√†ng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/cart.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/index.css}">
</head>
<body>
<!-- S·ª≠ d·ª•ng fragment header -->
<div th:replace="fragment/Header :: header(${account})"></div>

<!-- Body -->
<div class="cart-container my-5">
    <h2>Gi·ªè h√†ng</h2>

    <!-- Ki·ªÉm tra n·∫øu gi·ªè h√†ng r·ªóng -->
    <div th:if="${msg != null}">
        <p th:text="${msg}" class="text-danger"></p>
    </div>

    <!-- Hi·ªÉn th·ªã gi·ªè h√†ng n·∫øu c√≥ s·∫£n ph·∫©m -->
    <div class="cart-content" th:if="${cartItems != null}">
        <div class="left-section">
            <!-- Gi·ªè h√†ng -->
            <div class="cart">
                <div class="cart-header">
                    <div class="product-header">
                        <input type="checkbox"/>
                        <p>S·∫£n ph·∫©m</p>
                    </div>
                    <div class="header-item">ƒê∆°n gi√°</div>
                    <div class="header-item">S·ªë l∆∞·ª£ng</div>
                    <div class="header-item">Th√†nh ti·ªÅn</div>
                </div>

                <!-- Duy·ªát qua t·ª´ng s·∫£n ph·∫©m trong gi·ªè h√†ng -->
                <div class="cart-item" th:each="item : ${cartItems}">
                    <div class="product">
                        <input type="checkbox"/>
                        <img th:src="${item.sanPham.image}" alt="·∫¢nh s·∫£n ph·∫©m"/>
                        <div class="product-info">
                            <p class="product-name" th:text="${item.sanPham.tenSanPham}"></p>
                        </div>
                    </div>
<!--                    <div class="price" th:text="${#numbers.formatDecimal(item.sanPham.giaBan, 0, 'POINT', 'COMMA')} + ' ƒë'"></div>-->
                    <div class="price" th:text="${item.sanPham.giaBan} + ' ƒë'"></div>
                    <div class="quantity">
                        <button>-</button>
                        <input type="number" th:value="${item.soLuong}" min="1"/>
                        <button>+</button>
                    </div>
                    <div class="total">
<!--                        <p th:text="${#numbers.formatDecimal(item.sanPham.giaBan * item.soLuong, 0, 'POINT', 'COMMA')} + ' ƒë'"></p>-->
                        <p th:text="${item.sanPham.giaBan * item.soLuong} + ' ƒë'"></p>
                        <button class="delete-item">üóë</button>
                    </div>
                </div>
            </div>

            <!-- Qu√† t·∫∑ng (n·∫øu c√≥) -->
<!--            <div class="gift-section" th:if="${cartItems[0]?.quaTang != null}">-->
<!--                <h3>Qu√† t·∫∑ng</h3>-->
<!--                <div class="gift-item" th:each="item : ${cartItems}">-->
<!--                    <img th:src="${item.quaTang.hinhAnh}" alt="Qu√† t·∫∑ng"/>-->
<!--                    <div class="gift-info">-->
<!--                        <p class="gift-name" th:text="${item.quaTang.tenSanPham}"></p>-->
<!--                        <p class="unit">ƒê∆°n v·ªã: <span th:text="${item.quaTang.donViTinh}"></span></p>-->
<!--                    </div>-->
<!--                    <div class="quantity-gift">-->
<!--                        <p th:text="'x' + ${item.quaTang.soLuong}"></p>-->
<!--                    </div>-->
<!--                    <div class="total-gift">-->
<!--                        <p>0 ƒë</p>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
        </div>

        <!-- C·ªôt t√≥m t·∫Øt -->
        <div class="cart-summary">
            <h3>Khuy·∫øn m√£i</h3>
            <div class="promo-code-section">
                <label for="promo-code">Ch·ªçn m√£:</label>
                <select id="promo-code" class="promo-code">
                    <option value="">Ch·ªçn m√£ khuy·∫øn m√£i</option>
                    <option value="PROMO10">Gi·∫£m 10%</option>
                    <option value="FREESHIP">Mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn</option>
                    <option value="DISCOUNT50">Gi·∫£m 50.000 ƒë</option>
                </select>
            </div>
            <div class="summary-details">
                <p>T·∫°m t√≠nh: <span th:text="${totalAmount} + ' ƒë'"></span></p>
                <p>Gi·∫£m gi√° ∆∞u ƒë√£i: <span>-</span></p>
                <p>Gi·∫£m gi√° s·∫£n ph·∫©m: <span>-</span></p>
                <p class="total-summary">T·ªïng ti·ªÅn: <span th:text="${totalAmount} + ' ƒë'"></span></p>
            </div>
            <button class="buy-button">Mua ngay</button>
        </div>
    </div>
</div>

<!-- S·ª≠ d·ª•ng fragment footer -->
<div th:replace="fragment/Footer :: footer"></div>
</body>
</html>
